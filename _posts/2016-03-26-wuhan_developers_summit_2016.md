---
layout: post
title: 参加 2016 武汉开发者峰会后的学习总结
category: 技术
---

### 絮叨一下
第一个得说的是这个交流会的一等奖中奖号码是194，我的号码是193，就这样和乐视tv擦肩而过了。另一个感想是这个峰会上的主题分享者好多来自华科的：简寻的CTO是这次峰会的主持人，华科毕业；武汉腾讯技术负责人是华科的；斗鱼的CTO和猫头鹰队长也是华科的。还有几个也是华科毕业只是记得不太清楚不能对号入座，粗略算起来好像分享者中华科校友占了大部分。会后才了解到极限验证的黄胜蓝是去年才从武大毕业。

武汉像这样的技术交流会不多，基本只有thoughtworks每个月组织一次的openParty，我参加了好几次，氛围挺好也学到不少东西。这次峰会应该算是比较大型的一次，来了300多人，而分享的内容也确实不错。对于现阶段的我，除了对大数据计算处理和机器学习方面没有涉及，其他方面对我启发还是很多的。

### DB查询完全遵循缓存的查询
DB查询完全遵循缓存的查询意思是：查询只查到到缓存层面就结束，缓存没有命中就等同于DB没有查到。这个思路是极限验证的CTO黄胜蓝提出来的。我联想到了13年时候在PPS工作时碰到的一个场景：当时有个同事负责的项目是给几千万的视频提供评论接口服务，而实际上大概只有1/10的视频是有评论的。而我们的缓存策略是对所有的视频的评论进行缓存，导致缓存占用空间大、而且一旦缓存崩溃，缓存预热周期长。当时没有想到好的策略，现在觉得黄胜蓝提出的思路正好可以解决这个场景。一方面视频的评论列表数据对实时性要求不高，另一方面只针对有评论的视频进行缓存，缓存占用空间大大减小，缓存灾后预热恢复也快了。

### 一致性hash的另类管理方案
还是极限验证的CTO黄胜蓝的思路。传统的分布式缓存的方案是一致性hash+主备。而黄胜蓝的思路是：我们给redis进行一个注册，写入时客户端通过一致性hash，写入当前机器与hash环上的下一台机器，实现数据冗余。读取时从当前机器读取，失败则从hash环上下一台机器读取。也就是每一台机器一半数据是可用的，一半数据是冗余的备份数据。感觉思路很新颖，而他们方案既然已经在线上运行，必然有可取之处。

### 提升性能的五个关键点
这个是武汉腾讯的技术负责人阮曙东总结的：

1. 提高CPU的利用率，解决内存用完cpu还有多的问题
2. 是减少系统IO
3. 异步化
4. 协程式开发
5. 高并发epoll
6. 无锁化，做代码的时候尽量不要去锁
7. 减少内核调用 

